<!-- partial -->
<div class="container-fluid page-body-wrapper">

    <div class="content-wrapper">
        <div class="row">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a [routerLink]="['/home']"
                            routerLinkActive="router-link-active">Home</a></li>
                    <li class="breadcrumb-item active">จัดการเรื่องประชุม</li>
                </ol>
            </nav>
            <div class="col-md-12 grid-margin">
                <div class="row">
                    
                    <div class="col-12 col-xl-8 mb-4 mb-xl-0">
                        <h4 class="font-weight-bold">จัดการเรื่องประชุม <a href="#" data-toggle="modal"
                                data-target="#meeting-setting" data-whatever="@getbootstrap">
                                <span class="badge badge-primary"></span>
                                <i class="icon-circle-plus"></i>
                            </a>
                        </h4>

                        <h6 class="font-weight-normal mb-0">&nbsp;</h6>
                    </div>
                    <div class="col-12 col-xl-4">
                        <div class="justify-content-end d-flex">
                            <div class="add-items d-flex mb-0 mt-2">
                                <input type="text" [(ngModel)]="searchText" (input)="onSearch()"
                                    class="form-control todo-list-input" placeholder="ค้นหา">
                                <!-- <input type="text" class="form-control todo-list-input"
                                    placeholder="เพิ่มหัวข้อการประชุม">
                                <button class="add btn btn-icon text-primary todo-list-add-btn bg-transparent"
                                    data-toggle="modal" data-target="#meeting-setting" data-whatever="@getbootstrap"><i
                                        class="icon-circle-plus"></i></button> -->
                                <!-- <button mat-button (click)="openDialog()">Open dialog</button> -->
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <p class="card-title mb-0">เรื่องหรือหัวข้อการประชุม</p>

                        <div class="table-responsive">
                            <table class="table table-striped table-borderless">
                                <thead>
                                    <tr>
                                        <th>ลำดับ</th>
                                        <th>ชื่อการประชุม</th>
                                        <th>ประจำปี</th>
                                        <th>เลขที่คำสั่ง</th>
                                        <th>เอกสารคำสั่ง</th>
                                        <!-- <th>ผู้ร่วมประชุม</th> -->
                                        <th>คัดลอก</th>
                                        <th>แก้ไข</th>
                                        <th>เพิ่มครั้งการประชุม</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let item of filteredItems | paginate: { itemsPerPage: 10, currentPage: p }; let i = index">
                                        <td>{{ i + (p - 1) * 10 + 1 }}</td>
                                        <td class="font-weight-bold">{{item.open_title}}</td>
                                        <td class="font-weight-bold">{{item.open_year}}</td>
                                        <td class="font-weight-bold">{{item.open_order}}</td>
                                        <td class="font-weight-bold">
                                            <a [routerLink]="['/meeting-setting']" routerLinkActive="router-link-active"
                                                *ngIf="item.open_path != ''" (click)="openAnyFile(item.open_path)">
                                                <span class="badge badge-info"><i class="mdi mdi-book-open"></i>
                                                    เอกสาร</span>
                                            </a>
                                        </td>

                                        <!-- <td class="font-weight-medium">
                                            <a [routerLink]="['/meeting-setting']" routerLinkActive="router-link-active"
                                                data-toggle="modal" data-target="#add-user-meeting"
                                                (click)="personAdd(item.open_code)">
                                                <span class="badge badge-secondary"><i
                                                        class="mdi mdi-account-multiple-plus"></i> ผู้เข้าร่วม</span>
                                            </a>
                                        </td> -->

                                        <td class="font-weight-medium">
                                            <a [routerLink]="['/meeting-setting']" routerLinkActive="router-link-active"
                                                data-toggle="modal" data-target="#myModal"
                                                (click)="copyOpenMeeting(item.open_code)">
                                                <span class="badge badge-primary"><i class="mdi mdi-content-copy"></i>
                                                    คัดลอก</span>
                                            </a>
                                        </td>

                                        <td class="font-weight-medium">
                                            <button
                                                class="add btn btn-icon text-primary todo-list-add-btn bg-transparent"
                                                data-toggle="modal" data-target="#meeting-setting"
                                                data-whatever="@getbootstrap" (click)="onClickEditMeetingOpen(item)">
                                                <span class="badge badge-warning"><i class="mdi mdi-grease-pencil"></i>
                                                </span></button>

                                            <!-- <button
                                                class="add btn btn-icon text-primary todo-list-add-btn bg-transparent"
                                                (click)="delOpenMeeting(item.open_code)"><span
                                                    class="badge badge-danger ml-2"><i class="mdi mdi-delete"></i>
                                                </span></button> -->
                                        </td>

                                        <td class="font-weight-medium">
                                            <a href="#" [routerLink]="['/meeting-time/',item.open_code,item.open_title]"
                                                routerLinkActive="router-link-active">
                                                <span class="badge badge-warning font-weight-bold">
                                                    <i class="mdi mdi-shape-square-plus"></i> เพิ่ม</span>
                                            </a>
                                        </td>
                                        <!-- <td class="font-weight-medium">
                                            <a (click)="delMeeting(item.meeting_code)">
                                                <span class="badge badge-danger"><i class="mdi mdi-delete"></i> ลบ</span>
                                            </a>
                                        </td> -->
                                    </tr>

                                </tbody>
                            </table>
                            <div class="list">
                                <pagination-controls (pageChange)="p=$event"></pagination-controls>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- <div class="col-md-10 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">To Do Lists</h4>
                        <div class="list-wrapper pt-2">
                            <ul class="d-flex flex-column-reverse todo-list todo-list-custom">
                                <li>
                                    <div class="form-check form-check-flat">
                                        <label class="form-check-label">
                                            <input class="checkbox" type="checkbox">
                                            Meeting with Urban Team
                                        </label>
                                    </div>
                                    <i class="remove ti-close"></i>
                                </li>
                                <li class="completed">
                                    <div class="form-check form-check-flat">
                                        <label class="form-check-label">
                                            <input class="checkbox" type="checkbox" checked>
                                            Duplicate a project for new customer
                                        </label>
                                    </div>
                                    <i class="remove ti-close"></i>
                                </li>
                                <li>
                                    <div class="form-check form-check-flat">
                                        <label class="form-check-label">
                                            <input class="checkbox" type="checkbox">
                                            Project meeting with CEO
                                        </label>
                                    </div>
                                    <i class="remove ti-close"></i>
                                </li>
                                <li class="completed">
                                    <div class="form-check form-check-flat">
                                        <label class="form-check-label">
                                            <input class="checkbox" type="checkbox" checked>
                                            Follow up of team zilla
                                        </label>
                                    </div>
                                    <i class="remove ti-close"></i>
                                </li>
                                <li>
                                    <div class="form-check form-check-flat">
                                        <label class="form-check-label">
                                            <input class="checkbox" type="checkbox">
                                            Level up for Antony
                                        </label>
                                    </div>
                                    <i class="remove ti-close"></i>
                                </li>
                            </ul>
                        </div>
                        <div class="add-items d-flex mb-0 mt-2">
                            <input type="text" class="form-control todo-list-input" placeholder="Add new task">
                            <button class="add btn btn-icon text-primary todo-list-add-btn bg-transparent"><i
                                    class="icon-circle-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div> -->
        </div>

    </div>
    <!-- content-wrapper ends -->

    <!-- เพิ่มผู้เข้าร่วมประชุม Add user meeting -->
    <div class="modal fade" id="add-user-meeting" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog md-modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">เพิ่มผู้เข้าร่วมประชุม</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="mt-4">
                        <div class="row">
                            <div class="col-md-12 grid-margin stretch-card">
                                <div class="card">
                                    <!-- <div class="card-title">
                                        <h4 class="card-title">:: คณะกรรมการพิจารณาวาระ</h4>
                                    </div> -->
                                    <div class="card-body">
                                        <form class="forms-person" [formGroup]="personForm" name="forms-person">
                                            <div class="form-group row">
                                                <label for="exampleInputUsername2"
                                                    class="col-sm-3 col-form-label">บุคคลกร</label>
                                                <div class="col-sm-3">
                                                    <div class="form-check1 ml-3">
                                                        <label class="form-check-label">
                                                            <input type="radio" class="form-check-input"
                                                                [(ngModel)]="persons.person_rstatus"
                                                                name="person_rstatus" formControlName="person_rstatus"
                                                                value="01" checked>
                                                            ภายใน
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <div class="form-check1 ml-2">
                                                        <label class="form-check-label">
                                                            <input type="radio" class="form-check-input"
                                                                [(ngModel)]="persons.person_rstatus"
                                                                name="person_rstatus" formControlName="person_rstatus"
                                                                value="02">
                                                            ภายนอก
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <style>
                                                .ng-autocomplete {
                                                    width: 100%;
                                                }
                                            </style>

                                            <div class="form-group row">
                                                <label for="exampleInputUsername2"
                                                    class="col-sm-3 col-form-label">ค้นหา:</label>
                                                <div class="col-sm-5">
                                                    <div class="ng-autocomplete">
                                                        <ng-autocomplete [data]="data_person" [searchKeyword]="keyword"
                                                            placeholder="ค้นหาคณะกรรมการ"
                                                            (selected)='selectEvent($event)'
                                                            (inputChanged)='onChangeSearch($event)'
                                                            (inputFocused)='onFocused($event)'
                                                            [itemTemplate]="itemTemplate"
                                                            [notFoundTemplate]="notFoundTemplate"
                                                            formControlName="person_id">
                                                        </ng-autocomplete>

                                                        <ng-template #itemTemplate let-item>
                                                            <a [innerHTML]="item.name"></a>
                                                        </ng-template>

                                                        <ng-template #notFoundTemplate let-notFound>
                                                            <div [innerHTML]="notFound">
                                                            </div>
                                                        </ng-template>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group row">
                                                <label for="exampleInputUsername2"
                                                    class="col-sm-3 col-form-label">ตำแหน่ง</label>
                                                <div class="col-sm-5">
                                                    <select class="form-control" [(ngModel)]="persons.mtposition_code"
                                                        formControlName="mtposition_code" name="mtposition_code">
                                                        <option *ngFor="let item of mtposition_list"
                                                            value="{{ item.mtposition_code }}">
                                                            {{ item.mtposition_name }}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="form-group row">
                                                <label for="exampleInputUsername2"
                                                    class="col-sm-3 col-form-label"></label>

                                                <div class="col-sm-2">
                                                    <button type="button" [disabled]="!personForm.valid"
                                                        (click)="addPerson(persons, person.id, person.name)"
                                                        class="btn btn-outline-primary">เพิ่มผู้เข้าร่วม</button>
                                                </div>

                                                <div class="col-sm-2">

                                                </div>
                                            </div>

                                            <div class="row">
                                                <h2 class="card-title">ผู้เข้าร่วมประชุม
                                                </h2>
                                                <ul class="list-group">
                                                    <li *ngFor="let item of person_list; let i = index"
                                                        class="list-group-item d-flex justify-content-between align-items-center">
                                                        <div>
                                                            <span class="badge badge-secondary badge-pill">{{i
                                                                + 1}}</span>
                                                            {{item.person_name}}
                                                        </div>
                                                        <div>
                                                            <span
                                                                class="badge badge-primary badge-pill">{{item.mtposition_name}}</span>
                                                            <button type="button" (click)="delPerson(item)"
                                                                class="btn btn-outline-danger btn-sm m-2">ลบ</button>
                                                        </div>

                                                    </li>
                                                </ul>
                                            </div>

                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">ปิด</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ตั้งค่าการประชุม -->
    <div class="modal fade" id="meeting-setting" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">สร้างชื่อประชุม เพิ่มตำแหน่งในการประชุม กำหนดวาระการประชุม</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                        (click)="confirmDone(); stepper.reset()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="col-md-12 grid-margin stretch-card">
                        <div class="card">
                            <div class="card-body">
                                <div class="col-md-12 grid-margin stretch-card">
                                    <div class="card">
                                        <div class="card-body">
                                            <!-- <button mat-raised-button (click)="isLinear = !isLinear" id="toggle-linear">
                                                {{!isLinear ? 'Enable linear mode' : 'Disable linear mode'}}
                                            </button> -->
                                            <mat-stepper [linear]="isLinear" #stepper>
                                                <!--ระบุข้อมูลการประชุม-->
                                                <mat-step [stepControl]="meetingForm">
                                                    <h4 class="card-title">ระบุข้อมูลการประชุม</h4>
                                                    <p>&nbsp;</p>
                                                    <form class="forms-sample" [formGroup]="meetingForm">
                                                        <ng-template matStepLabel>สร้างประชุม</ng-template>
                                                        <div class="form-group row">
                                                            <label for="exampleInputUsername2"
                                                                class="col-sm-4 col-form-label">ประเภทการประชุม :
                                                                *</label>
                                                            <div class="col-sm-4">
                                                                <select class="form-control"
                                                                    [(ngModel)]="meeting.type_code" name="faculty_code"
                                                                    formControlName="type_code">
                                                                    <option *ngFor="let item of type_list"
                                                                        value="{{ item.type_code }}">
                                                                        {{ item.type_name }}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>

                                                        <div class="form-group row">
                                                            <label for="exampleInputUsername2"
                                                                class="col-sm-4 col-form-label">ชื่อเรื่องการประชุม:
                                                                *</label>
                                                            <div class="col-md-6">
                                                                <input type="text" class="form-control"
                                                                    [(ngModel)]="meeting.open_title" name="open_title"
                                                                    formControlName="open_title"
                                                                    placeholder="ชื่อเรื่อง หรือหัวข้อการประชุม">
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label for="exampleInputEmail2"
                                                                class="col-sm-4 col-form-label">ประจำปี:*
                                                                *</label>
                                                            <div class="col-sm-4">
                                                                <input type="email" class="form-control"
                                                                    [(ngModel)]="meeting.open_year" name="open_year"
                                                                    formControlName="open_year" placeholder="ปี พ.ศ.">
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label for="exampleInputMobile"
                                                                class="col-sm-4 col-form-label">เลขที่คำสั่ง:*</label>
                                                            <div class="col-sm-4">
                                                                <input type="text" class="form-control"
                                                                    [(ngModel)]="meeting.open_order" name="open_order"
                                                                    formControlName="open_order"
                                                                    placeholder="เลขหนังสือ เลขคำส่ัง">
                                                            </div>
                                                        </div>

                                                        <div class="form-group row">
                                                            <label for="exampleInputMobile"
                                                                class="col-sm-4 col-form-label">เอกสารคำสั่ง:*</label>
                                                            <div class="col-sm-4">
                                                                <input type="file" class="form-control"
                                                                    (change)="onFileChange($event)"
                                                                    [(ngModel)]="meeting.open_path" name="open_path"
                                                                    formControlName="open_path"
                                                                    placeholder="เอกสารคำสั่ง">
                                                            </div>
                                                            <div class="col-sm-2">
                                                                <div class="form-group d-flex flex-column-reverse"
                                                                    *ngIf="selectedFiles.length > 0">
                                                                    <a [href]="open_file" target="_blank"> <span
                                                                            class="badge badge-info">
                                                                            view file</span></a>
                                                                </div>
                                                                <a [routerLink]="['/meeting-setting']"
                                                                    routerLinkActive="router-link-active"
                                                                    *ngIf="meeting.open_path && selectedFiles.length == 0"
                                                                    (click)="openAnyFile(meeting.open_path)">
                                                                    <span class="badge badge-info">
                                                                        view file</span>
                                                                </a>
                                                                <!-- <a [routerLink]="['/meeting-setting']" routerLinkActive="router-link-active" 
                                                                *ngIf="meeting.open_path"
                                                                (click)="removeFile(meeting.open_path, meeting.open_code)">
                                                                <span class="badge badge-danger"><i class="mdi mdi-delete"></i>
                                                                    ลบ</span>
                                                            </a> -->
                                                            </div>
                                                        </div>

                                                        <div>
                                                            <button class="btn btn-light"
                                                                data-dismiss="modal">ยกเลิก</button>
                                                            <button type="submit" class="btn btn-primary m-2"
                                                                [disabled]="!meetingForm.valid"
                                                                (click)="saveOpenMeeting(meeting)"
                                                                matStepperNext>บันทึกและขั้นตอนถัดไป</button>
                                                        </div>
                                                    </form>
                                                </mat-step>

                                                <!--ตำแหน่งในการประชุม-->
                                                <mat-step [stepControl]="mtpositionForm" label="ตำแหน่งในการประชุม">
                                                    <div class="mt-4">
                                                        <div class="row">
                                                            <div class="col-md-12 grid-margin stretch-card">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <form class="forms-position"
                                                                            [formGroup]="mtpositionForm"
                                                                            name="forms-position">
                                                                            <div class="form-group row">
                                                                                <label for="exampleInputUsername2"
                                                                                    class="col-sm-3 col-form-label">ตำแหน่งวาระการประชุม</label>
                                                                                <div class="col-sm-7">
                                                                                    <input type="text"
                                                                                        class="form-control"
                                                                                        [(ngModel)]="mtposition_name"
                                                                                        name="mtposition_name"
                                                                                        formControlName="mtposition_name"
                                                                                        placeholder="เพิ่มตำแหน่งในการประชุม">
                                                                                </div>
                                                                                <div class="col-sm-2">
                                                                                    <button type="button"
                                                                                        [disabled]="!mtpositionForm.valid"
                                                                                        (click)="addMtPosition(mtposition_name)"
                                                                                        class="btn btn-outline-primary">เพิ่ม</button>
                                                                                </div>
                                                                            </div>
                                                                        </form>

                                                                        <div class="row">
                                                                            <h2 class="card-title">
                                                                                ตำแหน่งในการประชุม</h2>
                                                                            <ul class="list-group">
                                                                                <li *ngFor="let item of mtposition_list"
                                                                                    class="list-group-item d-flex justify-content-between align-items-center">
                                                                                    {{item.mtposition_name}}
                                                                                    <button
                                                                                        (click)="removeMtPosition(item.mtposition_code)"
                                                                                        class="btn btn-outline-danger btn-sm">ลบ</button>
                                                                                </li>

                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div
                                                                class="d-flex justify-content-between flex-row mb-5 mt-4">
                                                                <button class="btn btn-outline-primary"
                                                                    matStepperPrevious>
                                                                    <i class="fa fa-angle-left"></i> กลับ
                                                                </button>
                                                                <button class="btn btn-outline-primary" matStepperNext>
                                                                    ขั้นตอนถัดไป <i class="fa fa-angle-right"></i>
                                                                </button>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </mat-step>

                                                <!--ระเบียบวาระ-->
                                                <mat-step [stepControl]="thirdFormGroup" label="หัวข้อวาระการประชุม">
                                                    <h4 class="card-title">:: กำหนดระเบียบวาระการประชุม</h4>
                                                    <div class="mt-4">
                                                        <div class="row">
                                                            <div class="col-md-5">
                                                                <div class="form-floating mb-3">
                                                                    <div class="example-container">
                                                                        <h6 class="card-title">เลือกวาระการประชุม</h6>
                                                                        <!-- <div cdkDropList #todoList="cdkDropList"
                                                                            [cdkDropListData]="topic_list"
                                                                            [cdkDropListConnectedTo]="[doneList]"
                                                                            class="example-list"
                                                                            (cdkDropListDropped)="drop($event)">
                                                                            <div class="example-box"
                                                                                *ngFor="let item of topic_list" cdkDrag>
                                                                                {{item.topic_name}}</div>
                                                                        </div> -->
                                                                        <ul class="list-group">
                                                                            <li *ngFor="let item of topic_list"
                                                                                class="list-group-item d-flex justify-content-between align-items-center">
                                                                                {{item.topic_name}}
                                                                                <button
                                                                                    (click)="addTopic(item.topic_code)"
                                                                                    class="btn btn-primary btn-sm">เลือก</button>
                                                                            </li>

                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-5">
                                                                <div class="form-floating mb-3">
                                                                    <div class="example-container">
                                                                        <h6 class="card-title">วาระการประชุมที่เลือก
                                                                        </h6>
                                                                        <!-- <div cdkDropList #doneList="cdkDropList"
                                                                            [cdkDropListData]="topic_done"
                                                                            [cdkDropListConnectedTo]="[todoList]"
                                                                            class="example-list"
                                                                            (cdkDropListDropped)="drop($event)">
                                                                            <div class="example-box"
                                                                                *ngFor="let item of topic_done" cdkDrag>
                                                                                {{item.topic_name}}</div>
                                                                        </div> -->
                                                                        <li *ngFor="let item of topic_done; let i = index"
                                                                            class="list-group-item d-flex justify-content-between align-items-center">
                                                                            <div>
                                                                                <span
                                                                                    class="badge badge-info">{{i+1}}</span>
                                                                                {{item.topic_name}}
                                                                            </div>
                                                                            <div>
                                                                                <button
                                                                                    (click)="removeTopicDone(item.mttopic_code)"
                                                                                    class="btn btn-danger btn-sm">ลบ</button>
                                                                            </div>


                                                                        </li>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- <div>
                                                                <button mat-button matStepperPrevious>Back</button>
                                                                <button mat-button matStepperNext>Next</button>
                                                              </div> -->
                                                            <div
                                                                class="d-flex justify-content-between flex-row mb-5 mt-4">
                                                                <button class="btn btn-outline-primary"
                                                                    matStepperPrevious>
                                                                    <i class="fa fa-angle-left"></i> กลับ
                                                                </button>
                                                                <button class="btn btn-outline-primary" matStepperNext>
                                                                    ขั้นตอนถัดไป <i class="fa fa-angle-right"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </mat-step>
                                                <!--กำหนดระเบียบวาระการประชุม-->
                                                <!-- <mat-step [stepControl]="thirdFormGroup" label="หน่วยงานเข้าร่วม">
                                                    <div class="mt-4">
                                                        <div class="row">
                                                            <div class="col-md-12 grid-margin stretch-card">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <form class="forms-agency" name="forms-agency">
                                                                            <div class="form-group row">
                                                                                <label for="exampleInputUsername2"
                                                                                    class="col-sm-3 col-form-label">เลือกหน่วยงาน</label>
                                                                                <div class="col-sm-7">
                                                                                    <select class="form-control"
                                                                                        [(ngModel)]="agencys.faculty_code"
                                                                                        name="faculty_code">
                                                                                        <option
                                                                                            *ngFor="let item of FAClist"
                                                                                            value="{{ item.FACULTY_CODE }}">
                                                                                            {{ item.FACULTY_TNAME }}
                                                                                        </option>
                                                                                    </select>
                                                                                </div>
                                                                                <div class="col-sm-2">
                                                                                    <button type="submit"
                                                                                        (click)="addAgency({ code: agencys.faculty_code, name: getFacultyName(agencys.faculty_code) })"
                                                                                        class="btn btn-outline-primary">เพิ่ม</button>
                                                                                </div>
                                                                            </div>
                                                                        </form>

                                                                        <div class="row">
                                                                            <h2 class="card-title">
                                                                                หน่วยงานเข้าร่วมเสนอระเบียบวาระ</h2>
                                                                            <ul class="list-group">
                                                                                <li *ngFor="let item of agency_list"
                                                                                    class="list-group-item d-flex justify-content-between align-items-center">
                                                                                    {{item.agency_name}}
                                                                                    <button
                                                                                        (click)="removeAgency(item.agency_code)"
                                                                                        class="btn btn-outline-danger btn-sm">ลบ</button>
                                                                                </li>

                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div
                                                                class="d-flex justify-content-between flex-row mb-5 mt-4">
                                                                <button class="btn btn-outline-primary"
                                                                    matStepperPrevious>
                                                                    <i class="fa fa-angle-left"></i> กลับ
                                                                </button>
                                                                <button class="btn btn-outline-primary" matStepperNext>
                                                                    ขั้นตอนถัดไป <i class="fa fa-angle-right"></i>
                                                                </button>
                                                            </div>
                                                            
                                                        </div>
                                                    </div>
                                                </mat-step> -->

                                                <!--คณะกรรมการพิจารณาวาระ-->
                                                <!-- <mat-step [stepControl]="forFormGroup" label="คณะกรรมการพิจารณาวาระ">
                                                    <div class="mt-4">
                                                        <div class="row">
                                                            <div class="col-md-12 grid-margin stretch-card">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <form class="forms-consider"
                                                                            [formGroup]="considerForm"
                                                                            name="forms-consider">
                                                                            <div class="form-group row">
                                                                                <label for="exampleInputUsername2"
                                                                                    class="col-sm-3 col-form-label">ค้นหา:</label>
                                                                                <div class="col-sm-6">
                                                                                    <div class="ng-autocomplete">
                                                                                        <ng-autocomplete
                                                                                            [data]="data_person"
                                                                                            [searchKeyword]="keyword"
                                                                                            placeholder="ค้นหาคณะกรรมการ"
                                                                                            (selected)='selectEvent($event)'
                                                                                            (inputChanged)='onChangeSearch($event)'
                                                                                            (inputFocused)='onFocused($event)'
                                                                                            [itemTemplate]="itemTemplate"
                                                                                            [notFoundTemplate]="notFoundTemplate"
                                                                                            formControlName="person_id">
                                                                                        </ng-autocomplete>

                                                                                        <ng-template #itemTemplate
                                                                                            let-item>
                                                                                            <a
                                                                                                [innerHTML]="item.name"></a>
                                                                                        </ng-template>

                                                                                        <ng-template #notFoundTemplate
                                                                                            let-notFound>
                                                                                            <div [innerHTML]="notFound">
                                                                                            </div>
                                                                                        </ng-template>
                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group row">
                                                                                <label for="exampleInputUsername2"
                                                                                    class="col-sm-3 col-form-label">ตำแหน่ง</label>
                                                                                <div class="col-sm-5">
                                                                                    <select class="form-control"
                                                                                        [(ngModel)]="position_code"
                                                                                        formControlName="position_code"
                                                                                        name="position_code">
                                                                                        <option
                                                                                            *ngFor="let item of position_list"
                                                                                            value="{{ item.position_code }}">
                                                                                            {{ item.position_name }}
                                                                                        </option>
                                                                                    </select>
                                                                                </div>
                                                                            </div>

                                                                            <div class="form-group row">
                                                                                <label for="exampleInputUsername2"
                                                                                    class="col-sm-3 col-form-label"></label>

                                                                                <div class="col-sm-2">
                                                                                    <button type="submit"
                                                                                        [disabled]="!considerForm.valid"
                                                                                        (click)="addConsider(position_code, person.id, person.name)"
                                                                                        class="btn btn-outline-primary">เพิ่ม</button>
                                                                                </div>
                                                                               
                                                                            </div>
                                                                        </form>

                                                                        <div class="row">
                                                                            <h2 class="card-title">คณะกรรมการพิจารณาวาระ
                                                                            </h2>
                                                                            <ul class="list-group">
                                                                                <li *ngFor="let item of consider_list; let i = index"
                                                                                    class="list-group-item d-flex justify-content-between align-items-center">
                                                                                    <div>
                                                                                        <span
                                                                                            class="badge badge-secondary badge-pill">{{i
                                                                                            + 1}}</span>
                                                                                        {{item.person_name}}
                                                                                    </div>
                                                                                    <div>
                                                                                        <span
                                                                                            class="badge badge-primary badge-pill">{{item.position_name}}</span>
                                                                                        <button type="submit"
                                                                                            (click)="delConsider(item.consider_code)"
                                                                                            class="btn btn-outline-danger btn-sm m-2">ลบ</button>
                                                                                    </div>

                                                                                </li>
                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div
                                                                class="d-flex justify-content-between flex-row mb-5 mt-4">
                                                                <button class="btn btn-outline-primary"
                                                                    matStepperPrevious>
                                                                    <i class="fa fa-angle-left"></i> กลับ
                                                                </button>
                                                                <button class="btn btn-outline-primary" matStepperNext>
                                                                    ขั้นตอนถัดไป <i class="fa fa-angle-right"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </mat-step> -->
                                                <mat-step>
                                                    <ng-template matStepLabel>เสร็จสิ้น</ng-template>
                                                    <!-- <p>ยืนยันการประชุมเพื่อแจ้งไปยังหน่วยงานดำเนินการเสนอวาระการประชุม
                                                    </p> -->
                                                    <div class="d-flex justify-content-between flex-row mb-5 mt-4">
                                                        <button class="btn btn-outline-primary" matStepperPrevious>
                                                            <i class="fa fa-angle-left"></i> กลับ
                                                        </button>

                                                        <!-- <button class="btn btn-primary"
                                                            (click)="confirmMeetingSet(meeting.meeting_code)">
                                                        เสร็จสิ้นกระบวนการ<i class="fa fa-angle-right"></i>
                                                        </button> -->

                                                        <button class="btn btn-primary" data-dismiss="modal"
                                                            (click)="confirmDone(); stepper.reset()">
                                                            เสร็จสิ้นกระบวนการ<i class="fa fa-angle-right"></i>
                                                        </button>
                                                    </div>
                                                    <!-- <div>
                                                        <button mat-button matStepperPrevious>Back</button>
                                                        <button mat-button (click)="stepper.reset()">Reset</button>
                                                    </div> -->
                                                </mat-step>
                                            </mat-stepper>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal"
                        (click)="confirmDone(); stepper.reset()">ปิด</button>
                    <!-- <button type="submit" [disabled]="!regisForm.valid" class="btn btn-primary" data-dismiss="modal"
                        (click)="saveUser(user)">ยืนยันเพิ่มผู้ใช้</button> -->
                </div>

            </div>
        </div>
    </div>


    <!-- test modal steper -->
    <div class="modal fade" id="meeting-setting-test" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">เปิดประชุม วาระการประชุม ระบุผู้เกี่ยวข้อง</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="col-md-12 grid-margin stretch-card">
                        <div class="card">
                            <div class="card-body">
                                <div class="col-md-12 grid-margin stretch-card">
                                    <div class="card">
                                        <div class="card-body">

                                            <button mat-raised-button (click)="isLinear = !isLinear" id="toggle-linear">
                                                {{!isLinear ? 'Enable linear mode' : 'Disable linear mode'}}
                                            </button>
                                            <mat-stepper [linear]="isLinear" #stepper>
                                                <mat-step [stepControl]="firstFormGroup">
                                                    <form [formGroup]="firstFormGroup">
                                                        <ng-template matStepLabel>Fill out your name</ng-template>
                                                        <mat-form-field>
                                                            <mat-label>Name</mat-label>
                                                            <input matInput placeholder="Last name, First name"
                                                                formControlName="firstCtrl" required>
                                                        </mat-form-field>
                                                        <div>
                                                            <button mat-button matStepperNext>Next</button>
                                                        </div>
                                                    </form>
                                                </mat-step>
                                                <mat-step [stepControl]="secondFormGroup" label="Fill out your address">
                                                    <form [formGroup]="secondFormGroup">
                                                        <mat-form-field>
                                                            <mat-label>Address</mat-label>
                                                            <input matInput formControlName="secondCtrl"
                                                                placeholder="Ex. 1 Main St, New York, NY" required>
                                                        </mat-form-field>
                                                        <div>
                                                            <button mat-button matStepperPrevious>Back</button>
                                                            <button mat-button matStepperNext>Next</button>
                                                        </div>
                                                    </form>
                                                </mat-step>
                                                <mat-step>
                                                    <ng-template matStepLabel>Done</ng-template>
                                                    <p>You are now done.</p>
                                                    <div>
                                                        <button mat-button matStepperPrevious>Back</button>
                                                        <button mat-button (click)="stepper.reset()">Reset</button>
                                                    </div>
                                                </mat-step>
                                            </mat-stepper>


                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">ปิด</button>
                    <!-- <button type="submit" [disabled]="!regisForm.valid" class="btn btn-primary" data-dismiss="modal"
                        (click)="saveUser(user)">ยืนยันเพิ่มผู้ใช้</button> -->
                </div>

            </div>
        </div>
    </div>